<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/scottstensland"

    >websockets-streaming-audio (v1.0.35)</a>
</h1>
<h4>Click a browser button to launch a node.js process on the server side which streams audio using web sockets back to the browser which is then rendered using web audio API   My plan is to make this modular enough to get added to your process as simple API calls</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.websockets-streaming-audio">module websockets-streaming-audio</a><ol>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">websockets-streaming-audio.</span>local_app</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">websockets-streaming-audio.</span>local_app_loki</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">websockets-streaming-audio.</span>server_loki</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">websockets-streaming-audio.</span>server_streaming_audio</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.websockets-streaming-audio.local_app">module websockets-streaming-audio.local_app</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.local_app.launch_server">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.local_app.</span>launch_server
            <span class="apidocSignatureSpan">(working_dir)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.websockets-streaming-audio.local_app_loki">module websockets-streaming-audio.local_app_loki</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.local_app_loki.launch_server">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.local_app_loki.</span>launch_server
            <span class="apidocSignatureSpan">(working_dir)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.websockets-streaming-audio.server_loki">module websockets-streaming-audio.server_loki</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.server_loki.route_msg">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.server_loki.</span>route_msg
            <span class="apidocSignatureSpan">(received_json, curr_ws)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.server_loki.set_media_dir">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.server_loki.</span>set_media_dir
            <span class="apidocSignatureSpan">(given_media_dir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.server_loki.set_media_path">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.server_loki.</span>set_media_path
            <span class="apidocSignatureSpan">(given_media_path)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.websockets-streaming-audio.server_streaming_audio">module websockets-streaming-audio.server_streaming_audio</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.server_streaming_audio.route_msg">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.server_streaming_audio.</span>route_msg
            <span class="apidocSignatureSpan">(received_json, curr_ws)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.server_streaming_audio.set_media_dir">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.server_streaming_audio.</span>set_media_dir
            <span class="apidocSignatureSpan">(given_media_dir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.websockets-streaming-audio.server_streaming_audio.set_media_path">
            function <span class="apidocSignatureSpan">websockets-streaming-audio.server_streaming_audio.</span>set_media_path
            <span class="apidocSignatureSpan">(given_media_path)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.websockets-streaming-audio" id="apidoc.module.websockets-streaming-audio">module websockets-streaming-audio</a></h1>









</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.websockets-streaming-audio.local_app" id="apidoc.module.websockets-streaming-audio.local_app">module websockets-streaming-audio.local_app</a></h1>


    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.local_app.launch_server" id="apidoc.element.websockets-streaming-audio.local_app.launch_server">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.local_app.</span>launch_server
        <span class="apidocSignatureSpan">(working_dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">launch_server = function (working_dir) {

&#x22;use strict&#x22;;

console.log(&#x22;TOP of launch_server&#x22;);

console.log(require(&#x27;../package.json&#x27;).name, require(&#x27;../package.json&#x27;).version);

var server_streaming_audio = require(&#x22;./server_streaming_audio.js&#x22;);

console.log(&#x22;server_streaming_audio &#x22;, server_streaming_audio);


var WebSocketServer = require(&#x22;ws&#x22;).Server;
var http = require(&#x22;http&#x22;);
var express = require(&#x22;express&#x22;);
var app = express();
var port = process.env.PORT || 8888;

// ---

var cfg = require(&#x22;../config&#x22;);

var media_dir = cfg.media_dir;

console.log(&#x22;here is media_dir &#x22;, media_dir);

server_streaming_audio.set_media_dir(media_dir);



var media_path = cfg.media_path;

console.log(&#x22;here is media_path &#x22;, media_path);

server_streaming_audio.set_media_path(media_path);



// ---

app.use(express.static(working_dir)); // stens TODO - need to handle 404 file NOT found esp wav file

var server = http.createServer(app);

server.listen(port);

console.log(&#x22;http server listening on %d&#x22;, port);



console.log(&#x22;about to call new WebSocketServer&#x22;);

var wss = new WebSocketServer({
    server: server
});

console.log(&#x22;websocket server created&#x22;);



wss.on(&#x22;headers&#x22;, function (headers) {

    for (var curr_property in headers) {

        if (headers.hasOwnProperty(curr_property)) {

            console.log(&#x22;headers property &#x22; + curr_property + &#x22; --&#x3e;&#x22; + headers[curr_property] +
                &#x22;&#x3c;-- &#x22;);
        }
    }
});




wss.on(&#x22;error&#x22;, function (error) {

    console.error(&#x22;ERROR - seeing fault on WebSocketServer : &#x22;);

    for (var curr_property in error) {

        if (error.hasOwnProperty(curr_property)) {

            console.log(&#x22;error property &#x22; + curr_property + &#x22; --&#x3e;&#x22; + error[curr_property] +
                &#x22;&#x3c;-- &#x22;);
        }
    }
});



wss.on(&#x22;connection&#x22;, function(ws) {

    console.log(&#x22;OK cool ... just opened up a client connection ...&#x22;);

    var ID_timeout;
    (function run() {  //  run immediately ... then repeat after delay

        console.log(process.memoryUsage());

        ws.send(JSON.stringify(process.memoryUsage()), function() {});

        // ID_timeout = setTimeout(run, 60000);
        ID_timeout = setTimeout(run, 360000);
    }());

    console.log(&#x22;websocket connection open&#x22;);


    ws.on(&#x22;message&#x22;, function(received_data) {

        // console.log(&#x22;\n\nReceived message --------------------&#x22; + received_data);

        var received_json;

        try {

            received_json = JSON.parse(received_data);

        } catch (error) {

            var error_msg = &#x22;ERROR - received NON JSON message --&#x3e;&#x22; + error + &#x22;&#x3c;--&#x22; +
                            &#x22;received_data : &#x22; + received_data;

            console.error(error_msg);
            return;
        }

        server_streaming_audio.route_msg(received_json, ws);
    });

    // ---

    ws.on(&#x22;error&#x22;, function(event) {

        var error_msg = &#x22;ERROR on on on error : &#x22; + event;
        console.error(error_msg);
    });

    // ---

    ws.on(&#x22;close&#x22;, function() {

        console.log(&#x22;websocket connection close&#x22;);
        clearTimeout(ID_timeout);
    });
});

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.websockets-streaming-audio.local_app_loki" id="apidoc.module.websockets-streaming-audio.local_app_loki">module websockets-streaming-audio.local_app_loki</a></h1>


    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.local_app_loki.launch_server" id="apidoc.element.websockets-streaming-audio.local_app_loki.launch_server">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.local_app_loki.</span>launch_server
        <span class="apidocSignatureSpan">(working_dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">launch_server = function (working_dir) {

&#x22;use strict&#x22;;

console.log(&#x22;TOP of launch_server&#x22;);

console.log(require(&#x27;../package.json&#x27;).name, require(&#x27;../package.json&#x27;).version);

// var server_streaming_audio = require(&#x22;./server_streaming_audio.js&#x22;);
var server_streaming_audio = require(&#x22;./server_loki.js&#x22;);

console.log(&#x22;server_streaming_audio &#x22;, server_streaming_audio);


var WebSocketServer = require(&#x22;ws&#x22;).Server;
var http = require(&#x22;http&#x22;);
var express = require(&#x22;express&#x22;);
var app = express();
var port = process.env.PORT || 8888;

// ---

var cfg = require(&#x22;../config&#x22;);

var media_dir = cfg.media_dir;

console.log(&#x22;here is media_dir &#x22;, media_dir);

server_streaming_audio.set_media_dir(media_dir);



var media_path = cfg.media_path;

console.log(&#x22;here is media_path &#x22;, media_path);

server_streaming_audio.set_media_path(media_path);



// ---

app.use(express.static(working_dir)); // stens TODO - need to handle 404 file NOT found esp wav file

var server = http.createServer(app);

server.listen(port);

console.log(&#x22;http server listening on %d&#x22;, port);



console.log(&#x22;about to call new WebSocketServer&#x22;);

var wss = new WebSocketServer({
    server: server
});

console.log(&#x22;websocket server created&#x22;);



wss.on(&#x22;headers&#x22;, function (headers) {

    for (var curr_property in headers) {

        if (headers.hasOwnProperty(curr_property)) {

            console.log(&#x22;headers property &#x22; + curr_property + &#x22; --&#x3e;&#x22; + headers[curr_property] +
                &#x22;&#x3c;-- &#x22;);
        }
    }
});




wss.on(&#x22;error&#x22;, function (error) {

    console.error(&#x22;ERROR - seeing fault on WebSocketServer : &#x22;);

    for (var curr_property in error) {

        if (error.hasOwnProperty(curr_property)) {

            console.log(&#x22;error property &#x22; + curr_property + &#x22; --&#x3e;&#x22; + error[curr_property] +
                &#x22;&#x3c;-- &#x22;);
        }
    }
});



wss.on(&#x22;connection&#x22;, function(ws) {

    console.log(&#x22;OK cool ... just opened up a client connection ...&#x22;);

    var ID_timeout;
    (function run() {  //  run immediately ... then repeat after delay

        console.log(process.memoryUsage());

        ws.send(JSON.stringify(process.memoryUsage()), function() {});

        // ID_timeout = setTimeout(run, 60000);
        ID_timeout = setTimeout(run, 360000);
    }());

    console.log(&#x22;websocket connection open&#x22;);


    ws.on(&#x22;message&#x22;, function(received_data) {

        // console.log(&#x22;\n\nReceived message --------------------&#x22; + received_data);

        var received_json;

        try {

            received_json = JSON.parse(received_data);

        } catch (error) {

            var error_msg = &#x22;ERROR - received NON JSON message --&#x3e;&#x22; + error + &#x22;&#x3c;--&#x22; +
                            &#x22;received_data : &#x22; + received_data;

            console.error(error_msg);
            return;
        }

        server_streaming_audio.route_msg(received_json, ws);
    });

    // ---

    ws.on(&#x22;error&#x22;, function(event) {

        var error_msg = &#x22;ERROR on on on error : &#x22; + event;
        console.error(error_msg);
    });

    // ---

    ws.on(&#x22;close&#x22;, function() {

        console.log(&#x22;websocket connection close&#x22;);
        clearTimeout(ID_timeout);
    });
});

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.websockets-streaming-audio.server_loki" id="apidoc.module.websockets-streaming-audio.server_loki">module websockets-streaming-audio.server_loki</a></h1>


    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.server_loki.route_msg" id="apidoc.element.websockets-streaming-audio.server_loki.route_msg">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.server_loki.</span>route_msg
        <span class="apidocSignatureSpan">(received_json, curr_ws)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">route_msg = function (received_json, curr_ws) {

    console.log(&#x22;received_json&#x22;);
    console.log(received_json);

    shared_utils.show_object(received_json, &#x22;SSSSSSS received_json  &#x22;, &#x22;total&#x22;, 3);

    var requested_action = received_json.requested_action;

    if (typeof requested_action == &#x22;undefined&#x22;) {

        console.error(&#x22;ERROR - failed to see property : requested_action in client JSON msg&#x22;);
        // process.exit(8);
    }

    // ---

    // var putative_request_number = received_json.request_number; // request_number

    if (received_json.request_number === request_number) {

        request_status = request_ongoing;

    } else {

        request_number = received_json.request_number;
        request_status = request_new;

        var media_filename = received_json.requested_source;

        if (typeof media_filename !== &#x22;undefined&#x22;) {

            file_manager.set_media_filename(media_filename);

        } else {

            throw new Error(&#x22;ERROR - failed to supply requested_source&#x22;);
        }
    }

    // ---

    // bbbbbbbbbbbbb

    switch (requested_action) {

        case &#x22;stream_audio_to_client&#x22; : {

            // console.log(&#x22;RECEIVED ---------- stream_audio_to_client request_status &#x22;, request_status);
            // console.log(&#x22;RECEIVED ---------- stream_audio_to_client request_status &#x22;, request_status);
            // console.log(&#x22;RECEIVED ---------- stream_audio_to_client request_status &#x22;, request_status);

            if (request_status === request_ongoing) {

                if (request_number === previous_request_number) {


                    // console.log(&#x22;request_status  &#x22; + request_status);
                    // console.log(&#x22;request_ongoing &#x22; + request_ongoing);
                    // console.log(&#x22;request_number             &#x22; + request_number);
                    // console.log(&#x22;previous_request_number    &#x22; + previous_request_number);


                    console.log(&#x22;cool we have already stopped this stream request so ignoring stream request&#x22;);

                    break;
                }
            }

            // random_delay simulates a poor internet connection between server side and browser
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise
            // var random_delay = ~~(1200 * Math.random()); // TROUBLESHOOTING ONLY make 0 otherwise
            // var random_delay = ~~(800 * Math.random()); // TROUBLESHOOTING ONLY make 0 otherwise
            var random_delay = 0; // use this in prod
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise

            // console.log(&#x22;random_delay &#x22; + random_delay);

            setTimeout(function() {

                file_manager.read_file_pop_buffer_stream_back_to_client_async(
                                                        received_json, curr_ws, request_status);

            }, random_delay);

            break;
        }

        case &#x22;stop_streaming&#x22; : {

            // if (request_status === request_ongoing &#x26;&#x26;
            //     streaming_buffer_obj.curr_state === stream_status_prior) {

            //     console.log(&#x22;request_status  &#x22; + request_status);
            //     console.log(&#x22;request_ongoing &#x22; + request_ongoing);
            //     console.log(&#x22;streaming_buffer_obj.curr_state &#x22; + streaming_buffer_obj.curr_state);
            //     console.log(&#x22;stream_status_prior             &#x22; + stream_status_prior);

            //     console.log(&#x22;cool we have already stopped this stream request so ignoring stop request&#x22;);

            // } else {

                console.log(&#x22;RECEIVED ---------- stop_streaming&#x22;);
                console.log(&#x22;RECEIVED ---------- stop_streaming&#x22;);
                console.log(&#x22;RECEIVED ---------- stop_streaming&#x22;);

                stop_streaming(received_json, curr_ws);
            // }

            break;
        }

        default : {

            console.error(&#x22;ERROR - failed to ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var error_msg = &#x22;ERROR - received NON JSON message --&#x3e;&#x22; + error + &#x22;&#x3c;--&#x22; +
                    &#x22;received_data : &#x22; + received_data;

    console.error(error_msg);
    return;
}

server_streaming_audio.<span class="apidocCodeKeywordSpan">route_msg</span>(received_json, ws);
    });

    // ---

    ws.on(&#x22;error&#x22;, function(event) {

var error_msg = &#x22;ERROR on on on error : &#x22; + event;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.server_loki.set_media_dir" id="apidoc.element.websockets-streaming-audio.server_loki.set_media_dir">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.server_loki.</span>set_media_dir
        <span class="apidocSignatureSpan">(given_media_dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set_media_dir = function (given_media_dir) {

    media_dir = given_media_dir;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var cfg = require(&#x22;../config&#x22;);

var media_dir = cfg.media_dir;

console.log(&#x22;here is media_dir &#x22;, media_dir);

server_streaming_audio.<span class="apidocCodeKeywordSpan">set_media_dir</span>(media_dir);



var media_path = cfg.media_path;

console.log(&#x22;here is media_path &#x22;, media_path);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.server_loki.set_media_path" id="apidoc.element.websockets-streaming-audio.server_loki.set_media_path">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.server_loki.</span>set_media_path
        <span class="apidocSignatureSpan">(given_media_path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set_media_path = function (given_media_path) {

    media_path = given_media_path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var media_path = cfg.media_path;

console.log(&#x22;here is media_path &#x22;, media_path);

server_streaming_audio.<span class="apidocCodeKeywordSpan">set_media_path</span>(media_path);



// ---

app.use(express.static(working_dir)); // stens TODO - need to handle 404 file NOT found esp wav file
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.websockets-streaming-audio.server_streaming_audio" id="apidoc.module.websockets-streaming-audio.server_streaming_audio">module websockets-streaming-audio.server_streaming_audio</a></h1>


    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.server_streaming_audio.route_msg" id="apidoc.element.websockets-streaming-audio.server_streaming_audio.route_msg">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.server_streaming_audio.</span>route_msg
        <span class="apidocSignatureSpan">(received_json, curr_ws)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">route_msg = function (received_json, curr_ws) {

    // shared_utils.show_object(received_json, &#x22;SSSSSSS received_json  &#x22;, &#x22;total&#x22;, 3);


    // console.log(&#x22;received_json&#x22;);
    // console.log(received_json);



    var requested_action = received_json.requested_action;

    if (typeof requested_action == &#x22;undefined&#x22;) {

        console.error(&#x22;ERROR - failed to see property : requested_action in client JSON msg&#x22;);
        // process.exit(8);
    }

    // ---

    // var putative_request_number = received_json.request_number; // request_number

    if (received_json.request_number === request_number) {

        request_status = request_ongoing;

    } else {

        request_number = received_json.request_number;
        request_status = request_new;

        var media_filename = received_json.requested_source;

        if (typeof media_filename !== &#x22;undefined&#x22;) {

            file_manager.set_media_filename(media_filename);

        } else {

            throw new Error(&#x22;ERROR - failed to supply requested_source&#x22;);
        }
    }

    // ---

    // bbbbbbbbbbbbb

    switch (requested_action) {

        case &#x22;stream_audio_to_client&#x22; : {

            // console.log(&#x22;RECEIVED ---------- stream_audio_to_client request_status &#x22;, request_status);
            // console.log(&#x22;RECEIVED ---------- stream_audio_to_client request_status &#x22;, request_status);
            // console.log(&#x22;RECEIVED ---------- stream_audio_to_client request_status &#x22;, request_status);

            if (request_status === request_ongoing) {

                if (request_number === previous_request_number) {


                    // console.log(&#x22;request_status  &#x22; + request_status);
                    // console.log(&#x22;request_ongoing &#x22; + request_ongoing);
                    // console.log(&#x22;request_number             &#x22; + request_number);
                    // console.log(&#x22;previous_request_number    &#x22; + previous_request_number);


                    console.log(&#x22;cool we have already stopped this stream request so ignoring stream request&#x22;);

                    break;
                }
            }

            // random_delay simulates a poor internet connection between server side and browser
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise
            // var random_delay = ~~(1200 * Math.random()); // TROUBLESHOOTING ONLY make 0 otherwise
            // var random_delay = ~~(800 * Math.random()); // TROUBLESHOOTING ONLY make 0 otherwise
            var random_delay = 0; // use this in prod
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise
            // TROUBLESHOOTING ONLY make 0 otherwise

            // console.log(&#x22;random_delay &#x22; + random_delay);

            setTimeout(function() {

                file_manager.read_file_pop_buffer_stream_back_to_client_async(
                                                        received_json, curr_ws, request_status);

            }, random_delay);

            break;
        }

        case &#x22;stop_streaming&#x22; : {

            // if (request_status === request_ongoing &#x26;&#x26;
            //     streaming_buffer_obj.curr_state === stream_status_prior) {

            //     console.log(&#x22;request_status  &#x22; + request_status);
            //     console.log(&#x22;request_ongoing &#x22; + request_ongoing);
            //     console.log(&#x22;streaming_buffer_obj.curr_state &#x22; + streaming_buffer_obj.curr_state);
            //     console.log(&#x22;stream_status_prior             &#x22; + stream_status_prior);

            //     console.log(&#x22;cool we have already stopped this stream request so ignoring stop request&#x22;);

            // } else {

                console.log(&#x22;RECEIVED ---------- stop_streaming&#x22;);
                console.log(&#x22;RECEIVED ---------- stop_streaming&#x22;);
                console.log(&#x22;RECEIVED ---------- stop_streaming&#x22;);

                stop_streaming(received_json, curr_ws);
            // }

            break;
        }

        default : {

            console.error(&#x22;ERROR ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var error_msg = &#x22;ERROR - received NON JSON message --&#x3e;&#x22; + error + &#x22;&#x3c;--&#x22; +
                    &#x22;received_data : &#x22; + received_data;

    console.error(error_msg);
    return;
}

server_streaming_audio.<span class="apidocCodeKeywordSpan">route_msg</span>(received_json, ws);
    });

    // ---

    ws.on(&#x22;error&#x22;, function(event) {

var error_msg = &#x22;ERROR on on on error : &#x22; + event;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.server_streaming_audio.set_media_dir" id="apidoc.element.websockets-streaming-audio.server_streaming_audio.set_media_dir">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.server_streaming_audio.</span>set_media_dir
        <span class="apidocSignatureSpan">(given_media_dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set_media_dir = function (given_media_dir) {

    media_dir = given_media_dir;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var cfg = require(&#x22;../config&#x22;);

var media_dir = cfg.media_dir;

console.log(&#x22;here is media_dir &#x22;, media_dir);

server_streaming_audio.<span class="apidocCodeKeywordSpan">set_media_dir</span>(media_dir);



var media_path = cfg.media_path;

console.log(&#x22;here is media_path &#x22;, media_path);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.websockets-streaming-audio.server_streaming_audio.set_media_path" id="apidoc.element.websockets-streaming-audio.server_streaming_audio.set_media_path">
        function <span class="apidocSignatureSpan">websockets-streaming-audio.server_streaming_audio.</span>set_media_path
        <span class="apidocSignatureSpan">(given_media_path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set_media_path = function (given_media_path) {

    media_path = given_media_path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var media_path = cfg.media_path;

console.log(&#x22;here is media_path &#x22;, media_path);

server_streaming_audio.<span class="apidocCodeKeywordSpan">set_media_path</span>(media_path);



// ---

app.use(express.static(working_dir)); // stens TODO - need to handle 404 file NOT found esp wav file
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
